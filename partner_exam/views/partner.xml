<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="mcmacademy_partner_department__view_res_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="mcm_session.mcmacademy_view_res_partner_form_3"/>
        <field name="arch" type="xml">
            <field name="email" position="after">
                <label for="resultat" string="Résultat" invisible="0"/>
                <field name="resultat" invisible="0"/>
            </field>
            <xpath expr="//group//div[@class='row form-panel']//div[1]//div[3]//div[5]" position="after">
                <div class="col-sm-12">
                    <div attrs="{'invisible': [('company_id', '=', 2)]}">
                        <label for="note_exam" string="Note d'examen blanc :">Note d'examen blanc</label>
                        <field name="note_exam"/>
                    </div>
                </div>
            </xpath>
            <xpath expr="//page[last()]" position="after">
                <page name="note_exam" string="Examen">
                    <field name="note_exam_id"/>
                </page>
            </xpath>

            <div name="button_box" position="inside">
                <button class="oe_stat_button" context="{'search_default_partner_id': active_id}" type="object"
                        name="get_notes_history"
                        icon="fa-book">
                    <field string="Notes" name="note_exam_count" widget="statinfo"/>
                </button>
            </div>
        </field>
    </record>
    <!--    Searsh view add filter contact by resultat (recu/ajourne)-->
    <record model='ir.ui.view' id='view_res_partner_filter'>
        <field name='name'>res.partner.select.inherit.base.partner.filter</field>
        <field name='model'>res.partner</field>
        <field name='inherit_id' ref='base.view_res_partner_filter'/>
        <field name='arch' type='xml'>
            <field name="name" position="after">
                <field name="resultat" string="resultat"/>
            </field>
            <xpath expr="//search/group[@name='group_by']/filter[1]" position="after">
                <filter string="Resultat" name="resultat" context="{'group_by': 'resultat'}"/>
                <filter string="Resultat Ajourné" name="head_branch" domain="[('resultat', 'ilike', 'ajourne')]"/>
                <filter string="Resultat Reçu" name="head_branch" domain="[('resultat', 'ilike', 'recu')]"/>
            </xpath>
        </field>
    </record>
</odoo>